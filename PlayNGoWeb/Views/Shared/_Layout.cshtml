<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - My ASP.NET Application</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")



 

</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                @Html.ActionLink("Play N Go", "Index", "Home", new { area = "" }, new { @class = "navbar-brand playngohome" })
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav"></ul>
            </div>
        </div>
    </div>

    <div class="container body-content">

        <div class="row">

            @*<div class="chat_window">
                <input type="hidden" id="displayname" />
                <div class="top_menu">
                    <div class="buttons">
                        <div class="button close"></div><div class="button minimize"></div>
                        <div class="button maximize"></div>
                    </div><div class="title">Chat</div>
                </div><ul class="messages" id="discussion"></ul>
                <div class="bottom_wrapper clearfix">
                    <div class="message_input_wrapper">
                        <input class="message_input" id="message" placeholder="Type your message here..." />
                    </div>
                    <div class="send_message" id="sendMessage">
                        <div class="icon"></div>
                        <div class="text">Send</div>
                    </div>
                </div>
            </div>

            <div class="message_template">
                <li class="message">
                    <div class="avatar">
                    </div>
                    <div class="text_wrapper">
                        <div class="text">
                        </div>
                    </div>
                </li>
            </div>*@

            @*<div class="container">
                <input type="text" id="message" />
                <input type="button" id="sendmessage" value="Send" />
                <input type="hidden" id="displayname" />
                <ul id="discussion"></ul>
            </div>*@
            @*<input type="hidden" id="displayname" />*@
            <div id="chatbox_female" class="chatbox" style="bottom: 0px;right: 20px;display: block;">
                <div class="chatboxhead">
                    <div class="chatboxtitle">
                        <span class="glyphicon glyphicon-user pulse"></span>&nbsp; 
                       <a href="#" id="displayname"></a>
                    </div>
                    <div class="chatboxoptions">
                        <div class="dropdown">
                            <a href="javascript:void(0)" id="settings" data-toggle="dropdown" area-haspopup="true" area-expanded="true"><i class="fa fa-gears"></i></a>
                            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="settings">
                                <li><a href="#"><i class="fa fa-flag"></i> Report</a></li>
                                <li><a href="#"><i class="fa fa-ban"></i> Block</a></li>
                            </ul>
                        </div>
                        <a onclick="javascript:toggleChatBoxGrowth('female')" href="javascript:void(0)"><i class="fa fa-minus"></i></a>
                        <a onclick="javascript:closeChatBox('female')" href="javascript:void(0)"><i class="fa fa-close"></i></a>
                    </div>
                    <br clear="all">
                </div>
                <div class="chatboxcontent">
                    <ul id="discussion" style="list-style-type: none;"></ul>
                </div>
                <div class="chatboxinput"><textarea id="message" 
                                                    class="chatboxtextarea form-control"></textarea></div>
            </div>
            <div class="col-lg-3">

            </div>
            <div class="col-lg-9">
                @RenderBody()
            </div>
        </div>

        <hr />
        <footer class="py-5 bg-inverse">
            <div class="container">
                <p class="m-0 text-center text-white">Copyright &copy; Play N Go 2017</p>
            </div>
            <!-- /.container -->
        </footer>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")



    @RenderSection("scripts", required: false)


 
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="signalr/hubs"></script>

    <script type="text/javascript">
            $(function () {
                // Declare a proxy to reference the hub.
                var chat = $.connection.chatHub;
                console.log(chat);
    
                // Create a function that the hub can call to broadcast messages.
                chat.client.broadcastMessage = function (name, message) {
                    console.log(name);
                    // Html encode display name and message.
                    var encodedName = $('<div />').text(name).html();
                    var encodedMsg = $('<div />').text(message).html();
                    // Add the message to the page.
                    $('#discussion').append('<li><strong>' + encodedName
                    + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
                };
                // Get the user name and store it to prepend to messages.
                $('#displayname').text(prompt('Enter your name:', ''));

     
                // Set initial focus to message input box.
                $('#message').focus();
                // Start the connection.
                $.connection.hub.start().done(function () {
                    $("#message").keypress(function (e) {
                        var code = (e.keyCode ? e.keyCode : e.which);
                        if (code == 13) {
                                // Call the Send method on the hub.
                                chat.server.send($('#displayname').text(), $('#message').val());
                                // Clear text box and reset focus for next comment.
                                $('#message').val('').focus();
                        }
                    });
                });


      
            });
    </script>

</body>
</html>